CREATE TABLE Publishers(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    name VARCHAR(50) UNIQUE,
    country VARCHAR(25)
);
CREATE TABLE Developers(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    name VARCHAR(50) UNIQUE,
    country VARCHAR(25)
);
CREATE TABLE Games(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    name VARCHAR(75) UNIQUE,
    publisher INTEGER,
    developer INTEGER,
    genre VARCHAR(50),
    year INTEGER,
    description VARCHAR,
    FOREIGN KEY(publisher) REFERENCES Publishers(id) ON UPDATE CASCADE ON DELETE NO ACTION,
    FOREIGN KEY(developer) REFERENCES Developers(id) ON UPDATE CASCADE ON DELETE NO ACTION
);
CREATE TABLE Keys(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    key VARCHAR(25) UNIQUE,
    game INTEGER,
    platform VARCHAR(50),
    price INTEGER,
    purchased BOOL,
    FOREIGN KEY(game) REFERENCES Games(id) ON UPDATE CASCADE ON DELETE NO ACTION
);
CREATE TABLE Users(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    name VARCHAR(50) UNIQUE,
    password VARCHAR(50),
    is_admin BOOL
);
CREATE TABLE Orders(
    id INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    buyer INTEGER,
    date timestamptz default now(),
    key INTEGER,
    FOREIGN KEY(buyer) REFERENCES Users(id) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY(key) REFERENCES Keys(id) ON UPDATE CASCADE ON DELETE NO ACTION
);